{% extends 'base.html' %} {% block content %}{% include 'preloader.html' %}
<div class="container" ng-controller='manageController'>
    <br>
    <br> {% if project_manager or owner %}
    <div class="row">
        <div class="col m3">
            <a class="waves-effect waves-light btn" href="#project_modal"><i class="material-icons left">cloud</i>Add Project</a>
        </div>
        <div class="col m3">
            <a class="waves-effect waves-light btn" href="#send_invitaton_modal"><i class="material-icons left">cloud</i>Send Invite</a>
        </div>
        <div class="col m6">
            <a class="waves-effect waves-light btn" href="#milestone_modal"><i class="material-icons left">cloud</i>View/Manage MileStones</a>
        </div>
        <!-- Project Modal Structure -->
        <div id="project_modal" class="modal">
            <form>
                <div class="modal-content">
                    <div class="input-field col m8">
                        <input type="text" name="name" ng-model="name"> {{project_form.name.label_tag}}
                    </div>
                    <div class="col m4">
                        <button ng-click="addProject(name)" class="modal-action waves-effect waves-green btn-flat">Add</button>
                    </div>
                </div>
            </form>
            <div class="modal-footer">
                <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
            </div>
        </div>
        <!-- Invitation Modal Structure -->
        <div id="send_invitaton_modal" class="modal">
            <form>
                <div class="modal-content">
                    <div class="input-field col m8">
                        <input type="email" name="email" ng-model="email">
                        <label for="email">Enter Inviter Email Id</label>
                    </div>
                    <div class="col m4">
                        <button ng-click="sendInvite(email)" class="modal-action waves-effect waves-green btn-flat">Send</button>
                    </div>
                </div>
            </form>
            <div class="modal-footer">
                <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
            </div>
        </div>
        <!-- Project Modal Structure -->
        <div id="milestone_modal" class="modal">
            <form>
                <div class="modal-content">
                    <div class="row">
                        <div class="input-field col m4">
                            <label for="name">Enter MileStone</label>
                            <input type="text" name="name" ng-model="name">
                        </div>
                        <div class="col m4">
                            <select>
                                <option value="" disabled selected>Choose your Project</option>
                                <option value="1">Option 1</option>
                                <option value="2">Option 2</option>
                                <option value="3">Option 3</option>
                            </select>
                            <label>Project Name</label>
                        </div>
                        <div class="col m4">
                            <label for="start_date">Choose Start Date</label>
                            <input type="date" id="start_date" name="start_date" class="datepicker">
                        </div>
                        <div class="col m4">
                            <label for="end_date">Choose End Date</label>
                            <input type="date" id="end_date" name="end_date" class="datepicker">
                        </div>
                    </div>
                    <div class="input-field col m8">
                        <textarea id="milestone_description" class="materialize-textarea"></textarea>
                        <label for="milestone_description">Enter MileStone Description</label>
                    </div>
                    <div class="input-field col m4">
                        <button class="modal-action waves-effect waves-green btn-flat">Save</button>
                    </div>
                </div>
            </form>
            <div class="modal-footer">
                <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
            </div>
        </div>
    </div>
    {%endif%}
    <div class="row">
        <div class="col m7">
            <div class="row">
                <div class="col m12">
                    {% verbatim %}
                    <h4>Company Name: {{company.name}}</h4> {% endverbatim %}
                    <div class="col m12">
                        Members:
                    </div>
                    <div class="clearfix"></div>
                    {% if project_manager or owner %} {% verbatim %}
                    <div class="col m3" ng-repeat="employee in company.employees" data-drag="true" data-jqyoui-options="{revert: 'invalid', helper:'clone'}" id="{{employee.user.id}}" jqyoui-draggable="{animate:true, placeholder:'keep', onDrag:'memberDragging(event)'}">
                        {{employee.user.username}} {% endverbatim %}
                    </div>
                    {% else%}
                    <div class="col m3" ng-repeat="employee in company.employees">
                        {% verbatim %} {{employee.user.username}} {% endverbatim %}
                    </div>
                    {% endif%}
                </div>
            </div>
        </div>
        <div class="col m5">
            {% verbatim%}
            <div class="row" ng-repeat="project in projects">
                <div class="col m12">
                    <div class="card blue-grey darken-1" jqyoui-droppable="{onDrop:'addMember(project)'}" data-drop="true" id="{{project.id}}">
                        <div class="card-content white-text">
                            <span>Project Name: {{project.name}}</span>
                            <br/> Members:
                            <div class="row">
                                <div class="col m4" ng-repeat="member in project.members">
                                    {{member.user.username}}
                                </div>
                            </div>
                        </div>
                        <div class="card-action">
                            <a class="assign_operation" href="/todo/project_detail/{{project.id}}">View Detail</a>
                        </div>
                    </div>
                </div>
                {% endverbatim %}
            </div>
        </div>
    </div>
</div>
{% endblock %} {% block extra_js %}
<script>
$('#start_date').pickadate({
    selectMonths: true, // Creates a dropdown to control month
    selectYears: 15 // Creates a dropdown of 15 years to control year
});
$('#end_date').pickadate({
    selectMonths: true, // Creates a dropdown to control month
    selectYears: 15 // Creates a dropdown of 15 years to control year
});
$('.modal').modal();
$('select').material_select();
</script>
{% endblock %}