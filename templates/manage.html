{% extends 'base.html' %} {% block content %}{% include 'preloader.html' %}
<div class="container" ng-controller='manageController'>
    <br>
    <br> {% if project_manager or owner %}
    <div class="row">
        <div class="col m3">
            <a class="waves-effect waves-light btn" href="#project_modal"><i class="material-icons left">cloud</i>Add Project</a>
        </div>
        <div class="col m3">
            <a class="waves-effect waves-light btn" href="#send_invitaton_modal"><i class="material-icons left">cloud</i>Send Invite</a>
        </div>
        <div class="col m6">
            <a class="waves-effect waves-light btn" href="{% url "todo:milestone" %}"><i class="material-icons left">cloud</i>View/Manage MileStones</a>
        </div>
        <!-- Project Modal Structure -->
        <div id="project_modal" class="modal">
            <form>
                <div class="modal-content">
                    <div class="input-field col m8">
                        <input type="text" name="name" ng-model="name"> {{project_form.name.label_tag}}
                    </div>
                    <div class="col m4">
                        <button ng-click="addProject(name)" class="modal-action waves-effect waves-green btn-flat">Add</button>
                    </div>
                </div>
            </form>
            <div class="modal-footer">
                <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
            </div>
        </div>
        <!-- Invitation Modal Structure -->
        <div id="send_invitaton_modal" class="modal">
            <form>
                <div class="modal-content">
                    <div class="input-field col m8">
                        <input type="email" name="email" ng-model="email">
                        <label for="email">Enter Inviter Email Id</label>
                    </div>
                    <div class="col m4">
                        <button ng-click="sendInvite(email)" class="modal-action waves-effect waves-green btn-flat">Send</button>
                    </div>
                </div>
            </form>
            <div class="modal-footer">
                <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
            </div>
        </div>
        <div class="clearfix"></div>
    </div>
    {%endif%}
    <div class="row">
        <div class="col m7">
            <div class="row">
                <div class="col m12">
                    {% verbatim %}
                    <h4>Company Name: {{company.name}}</h4> {% endverbatim %}
                    <div class="col m12">
                        Members:
                    </div>
                    <div class="clearfix"></div>
                    {% if project_manager or owner %} {% verbatim %}
                    <div class="col m3" ng-repeat="employee in company.employees" data-drag="true" data-jqyoui-options="{revert: 'invalid', helper:'clone'}" id="{{employee.user.id}}" jqyoui-draggable="{animate:true, placeholder:'keep', onDrag:'memberDragging(event)'}">
                        {{employee.user.username}} {% endverbatim %}
                    </div>
                    {% else%}
                    <div class="col m3" ng-repeat="employee in company.employees">
                        {% verbatim %} {{employee.user.username}} {% endverbatim %}
                    </div>
                    {% endif%}
                </div>
            </div>
        </div>
        <div class="col m5">
            {% verbatim%}
            <div class="row" ng-repeat="project in projects">
                <div class="col m12">
                    <div class="card blue-grey darken-1" jqyoui-droppable="{onDrop:'addMember(project)'}" data-drop="true" id="{{project.id}}">
                        <div class="card-content white-text">
                            <span>Project Name: {{project.name}}</span>
                            <br/> Members:
                            <div class="row">
                                <div class="col m4" ng-repeat="member in project.members">
                                    {{member.user.username}}
                                </div>
                            </div>
                        </div>
                        <div class="card-action">
                            <a class="assign_operation" href="/todo/project_detail/{{project.id}}">View Detail</a>
                        </div>
                    </div>
                </div>
                {% endverbatim %}
            </div>
        </div>
    </div>
</div>
{% endblock %} {% block extra_js %}
<script>
$('.modal').modal();
</script>
{% endblock %}